# Allow your specific Cloudflare temporary domain
#quarkus.http.dev-ui.hosts=john-slight-withdrawal-much.trycloudflare.com

# Alternatively, use a wildcard (LESS SECURE - for testing only)
quarkus.http.dev-ui.hosts=0.0.0.0, .trycloudflare.com

quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,OPTIONS
# You MUST include Authorization here
quarkus.http.cors.headers=Content-Type,Authorization


quarkus.package.type=legacy-jar

quarkus.http.root-path=/portal

# Enable Basic Auth
quarkus.http.auth.basic=true

# Define the Admin User (Change these!)
quarkus.security.users.embedded.enabled=true
quarkus.security.users.embedded.plain-text=true
quarkus.security.users.embedded.users.admin=YourStrongPassword
quarkus.security.users.embedded.roles.admin=admin

# Secure the registration and deletion paths
quarkus.http.auth.permission.admin.paths=/portal/register,/portal/delete
quarkus.http.auth.permission.admin.policy=authenticated

# Replace the old entries that look like ${DB_USER}
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=hoa_admin
quarkus.datasource.password=qwertyuiop
quarkus.datasource.jdbc.url=jdbc:postgresql://192.168.100.80:5432/hoa_db

# Schema Mapping - THIS IS CRITICAL
# This tells Hibernate to use 'hoa' as the default schema for all entities
quarkus.hibernate-orm.database.default-schema=hoa

# JWT Configuration (Stable version)
smallrye.jwt.sign.algorithm=HS256

# If you have Hasura settings in here as well:
HASURA_URL=http://192.168.100.80:8080/v1/graphql
HASURA_ADMIN_SECRET=myadminsecretkey

# JWT Configuration
#smallrye.jwt.sign.key=bXktc3VwZXItc2VjcmV0LWhvYS1rZXktdGhhdC1pcy1hdC1sZWFzdC0zMi1jaGFyYWN0ZXJzLWxv
#bmcK

#smallrye.jwt.verify.key=my-super-secret-hoa-key-at-least-32-chars
#smallrye.jwt.new-token.signature-algorithm=HS256
#mp.jwt.verify.issuer=https://hoa-portal.com
#smallrye.jwt.sign.key-resolver=org.jboss.logmanager.LogManager # We'll use a simpler key for MVP

# Tell Quarkus to use HS256 for verification too
#smallrye.jwt.verify.algorithm=HS256

# Use 'smallrye.jwt.verify.key' for the raw string
# Ensure this EXACTLY matches the SECRET in your AuthResource.java
#smallrye.jwt.verify.key=my-super-secret-hoa-key-at-least-32-chars
#smallrye.jwt.verify.algorithm=HS256

#mp.jwt.verify.issuer=https://hoa-portal.com
quarkus.smallrye-jwt.enabled=true

# JWT Verification - Be very explicit for the Uber-Jar
#smallrye.jwt.verify.key=my-super-secret-hoa-key-at-least-32-chars
#smallrye.jwt.verify.algorithm=HS256
mp.jwt.verify.issuer=https://hoa-portal.com

# This tells the security layer to trust the property string
#smallrye.jwt.verify.key.format=ANY
quarkus.smallrye-jwt.enabled=true



quarkus.mongodb.connection-string=mongodb://192.168.100.80:27017
quarkus.mongodb.database=hoa_logs


# This tells Quarkus that @RolesAllowed should check for JWTs
#quarkus.smallrye-jwt.enabled=true 

# For the MVP, since we are using HS256 (Symmetric) in the code, 
# we need to tell the verifier to use the same secret.

quarkus.log.category."io.smallrye.jwt".level=DEBUG
quarkus.log.category."io.quarkus.security".level=DEBUG